# Модуль Fastery доставка для 1C Битрикс #

* Разработчик: Fastery.ru
* Версия: 1.0.0

### Настоятельно рекомендуем ознакомится с данным документом во избежании проблем связанных с работой интеграции ###

Модуль интеграции доставки [Fastery](http://fastery.ru) c 1С Битрикс полностью совместим с версиями модуля Интернет Магазин для 1С Битрикс версий 15+. 

## Функциональные возможности модуля ##

* Онлайн расчет стоимости доставки
* Онлайн расчет сроков доставки
* Вывод всевозможных способов доставки с рассчитанной стоимостью и сроками доставки
* Возможность выбора пунктов доставки на карте
* Создание заказа в платформе Fastery
* Создание заказа с отложенной выгрузкой в систему Fastery
* Передача информации по оплате заказа
* Обновление заказа в Fastery из админки магазина
* Кеширование расчета стоимости доставки
* Автоматическое сохранение номера заказа в системе Fastery в админке

## Как это работает ##

* Покупатель вводит выберает город в который требуется доставить заказа
* На этапе выбора способа доставки выбирает интересующий пункт (путем указания конкретного адреса для таких пунктов как ПВЗ и Почтовое отделение или же выбирает удобный пункт доставки на карте)
* Выбирает способ оплаты заказа
* Заполняет личную информацию
* Завершает оформление заказа
* Далее заказ создается в админке магазина а так же в платформе Fastery (если в настройках модуля была выбрана настройка "Отложенное создание заказа").

## Ручная установка ##

- Необходимые требования для установки модуля
    1. 1С Битрикс 15.* редакции Бизнес или Малый бизнес.

- Установка
    1. Подключитесь к вашему сайту по FTP
    2. Скопируйте каталог fastery.shipping в папку на сайте /bitrix/modules/
    3. Авторизуйтесь в админке 1С Битрикс
    4. В меню МаркетПлейс в Каталоге решений найдите модуль Fastery - модуль доставки и нажмите на ссылку Установить.

## Настройка модуля ##

- Настройки модуля включают в себя (для настройки модуля вы можете пройти в меню Настройки -> Настройки модулей -> Fastery - модуль доставки):
    * Тестовый режим: включите его для тестового подключения (секретный ключ и id магазина должны быть от demo платформы - demo.fastery.ru)
    * Секретный ключ: служит для идентификации интернет-магазина при получении запроса платформой, данный ключ вы можете получить в системе Fastery, для этого перейдите: Меню - Пользователи - Ваш пальзователь - access_token
    * ID магазина: Идентификатор магазина с которым ведется работа в модуле
    * Тип забора: Тип забора заказа курьерской службой (Курьером, Самопривоз)
    * Включить логирование создания заказов в Fastery: Включение или выключение логирование создание заказов в лог файл в каталоге /logs/
    * Включить логирование расчета стоимости и сроков доставки: включает логирование расчета стоимости и сроков доставки, используйте данную настройку для отладки.
    * Время кеширования: Выставляется время кеширования в секундах, для ускорения работы модуля, рекомендуется выставлять "86400" (24 часа)
    * Выгружать по статусу отгурзки: Выгружать заказы только при выставлении статуса отгурзки "Отгружен"
    * Свойства заказа: Список свойст необходимых для работы модуля, которые необходимо сопоставить со свойствами заказа в системе 1С Битрикс

- Настройка служб доставки
    * Пройдите в меню Магазин - Настройки - Службы доставки
    * Нажмите Кнопку Добавить и в выпадающем меню - Автоматизированная служба доставки
    * Заполните поле название Службы доставки и выставьте галочку Активность
    * Во вкладке Настройки обработчика в выпадающем списке Fastery - модуль автоматизированной доставки [FasteryModule]
    * Сохраните Службу доставки
    
- Дополнительные настройки
    * Пройдите в меню Магазин - Настройки - Свойства заказа - Список свойств
    * Нажмите на кнопку "Новое свойство" и выберите тип покупателя (Физическое или Юридическое лицо)
    * Установите следующие настройки:
        * Группа свойств - Данные для доставки
        * Название - Point id
        * Мнемонический код - POINT_ID
        * Активность - Включено
        * Служебное - Включено
    * Добавьте также свойства Улица, Дом, Квартира - если такие поля отсутствуют (данные свойства должны быть не служебные)
    * Во вкладке Привязка свойств, выберите службы доставки Курьером и Курьером экспресс для свойств Улица, Дом, Квартира
    * Нажимте на кнопку изменить поля Адрес и во вкладке Привязка свойств выберите ПВЗ и Почтовое отделение

## Удаление модуля ##

* Зайдите в меню "Marketplace" - Установленные решения
* Найдите в списке модулей - модуль с названием Fastery - модуль доставки (fastery.shipping), и удалите этот модуль